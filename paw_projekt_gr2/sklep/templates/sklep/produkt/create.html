{% extends "sklep/base.html" %}

{% block title %}Dodaj nowy produkt{% endblock %}

{% block content %}
    <h2>Dodaj nowy sprzęt jeździecki</h2>
    
    {% if errors %}
        <div style="background-color: #ffe6e6; border: 1px solid red; padding: 15px; margin-bottom: 20px; color: #cc0000;">
            <h3>Wystąpiły błędy formularza:</h3>
            <ul>
                {% for field, error_list in errors.items %}
                    <li>
                        <strong>{{ field|title }}:</strong> 
                        {% for error in error_list %}
                            {{ error }}
                        {% endfor %}
                    </li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}

    <form method="post">
        {% csrf_token %}
        
        <label>Nazwa:</label><br>
        <input type="text" name="nazwa" value="{{ old_data.nazwa|default:'' }}" required><br><br>
        
        <label>Opis:</label><br>
        <textarea name="opis" rows="4" cols="50">{{ old_data.opis|default:'' }}</textarea><br><br>
        
        <label>Cena (PLN):</label><br>
        <input type="number" step="0.01" name="cena" value="{{ old_data.cena|default:'' }}" required><br><br>

        <label>Ilość:</label><br>
        <input type="number" name="stan_magazynowy" value="{{ old_data.stan_magazynowy|default:'1' }}"><br><br>
        
        <label>Kategoria:</label><br>
        <select name="kategoria">
            {% for kat in kategorie %}
                <option value="{{ kat.id }}">{{ kat.nazwa }}</option>
            {% endfor %}
        </select><br><br>

        <button type="submit">Zapisz w bazie</button>
    </form>
{% endblock %}